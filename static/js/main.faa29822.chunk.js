(this["webpackJsonpvk-app"]=this["webpackJsonpvk-app"]||[]).push([[0],{152:function(e,t,a){e.exports=a(240)},240:function(e,t,a){"use strict";a.r(t);a(153),a(179),a(181),a(182),a(184),a(185),a(186),a(187),a(188),a(189),a(190),a(191),a(193),a(194),a(195),a(196),a(197),a(198),a(199),a(200),a(201),a(202),a(204),a(205),a(206),a(207),a(208),a(209),a(210),a(211),a(212),a(213),a(214),a(215),a(216),a(217),a(218),a(219),a(220),a(221);var n=a(0),c=a.n(n),r=a(32),l=a.n(r),i=a(28),o=a.n(i),s=a(11),u=a(7),m=(a(239),a(57),a(38)),h=a(33);var p=function(e){return c.a.createElement("button",{className:"cell",onClick:function(){return e.onChange(e.cell,e.chip,!1)}},e.text)};var b=function(e){var t=Object(n.useState)(e.field),a=Object(s.a)(t,2),r=a[0],l=a[1],i=Object(n.useState)(e.change),o=Object(s.a)(i,2),u=o[0],b=o[1],d=Object(n.useState)(e.turn),g=Object(s.a)(d,2),E=g[0],O=g[1];function f(t,a,n){if(n)l((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(m.a)({},t,a))})),O(!0);else if(E){e.ws.send("GTG".concat(e.enemy_id,"&").concat(e.game_id,"&").concat(t+a));var c=Object(h.a)(Object(h.a)({},r),{},Object(m.a)({},t,a));l((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(m.a)({},t,a))})),O(!1),e.checkWin(c)}}return e.change!==u&&e.change&&(b(e.change),f(e.change[0],e.change[1],!0)),c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"board-row"},c.a.createElement(p,{text:r[1],cell:1,chip:e.chip,onChange:f}),c.a.createElement(p,{text:r[2],cell:2,chip:e.chip,onChange:f}),c.a.createElement(p,{text:r[3],cell:3,chip:e.chip,onChange:f})),c.a.createElement("div",{className:"board-row"},c.a.createElement(p,{text:r[4],cell:4,chip:e.chip,onChange:f}),c.a.createElement(p,{text:r[5],cell:5,chip:e.chip,onChange:f}),c.a.createElement(p,{text:r[6],cell:6,chip:e.chip,onChange:f})),c.a.createElement("div",{className:"board-row"},c.a.createElement(p,{text:r[7],cell:7,chip:e.chip,onChange:f}),c.a.createElement(p,{text:r[8],cell:8,chip:e.chip,onChange:f}),c.a.createElement(p,{text:r[9],cell:9,chip:e.chip,onChange:f})))};var d,g,E,O,f=function(e){return c.a.createElement(b,{field:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:""},game_id:e.game_id,enemy_id:e.enemy_id,turn:e.turn,ws:e.ws,chip:e.chip,change:e.change,checkWin:function(t){for(var a=[[1,2,3],[4,5,6],[7,8,9],[1,4,7],[2,5,8],[3,6,9],[1,5,9],[3,5,7]],n=0;n<a.length;n++){var c=Object(s.a)(a[n],3),r=c[0],l=c[1],i=c[2];t[r]&&t[r]===t[l]&&t[r]===t[i]&&(e.ws.send("GTE".concat(e.enemy_id,"&").concat(e.game_id)),e.setPanel({current:"main",previous:""}),e.end())}}})},j=new WebSocket("wss://vk-app-server.herokuapp.com/");o.a.send("VKWebAppGetUserInfo").then((function(e){d=e.id,g=e.first_name,E=e.last_name,O=e.photo_200,j.send("INF".concat(d,"&").concat(g,"&").concat(E,"&").concat(O))}));var v=function(){var e=Object(n.useState)({current:"main",previous:""}),t=Object(s.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)("\u041f\u043e\u0438\u0441\u043a \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u0438\u043a\u0430..."),i=Object(s.a)(l,2),o=i[0],m=i[1],h=Object(n.useState)(),p=Object(s.a)(h,2),b=p[0],E=p[1],O=Object(n.useState)(),v=Object(s.a)(O,2),x=v[0],y=v[1],k=Object(n.useState)(0),C=Object(s.a)(k,2),S=C[0],T=C[1],w=Object(n.useState)(!0),_=Object(s.a)(w,2),G=_[0],N=_[1],z=Object(n.useState)(!0),I=Object(s.a)(z,2),A=I[0],D=I[1],W=Object(n.useState)(),F=Object(s.a)(W,2),J=F[0],P=F[1],K=Object(n.useState)(),R=Object(s.a)(K,2),V=R[0],B=R[1],L=Object(n.useState)(),U=Object(s.a)(L,2),X=U[0],q=U[1],H=Object(n.useState)(0),M=Object(s.a)(H,2),Q=M[0],Y=M[1],Z=Object(n.useState)(0),$=Object(s.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)(),ne=Object(s.a)(ae,2),ce=ne[0],re=ne[1];function le(){r({current:"main",previous:""}),m("\u041f\u043e\u0438\u0441\u043a \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u0438\u043a\u0430..."),E(),y(),N(!0)}return Object(n.useEffect)((function(){j.onmessage=function(e){if("GTF"===e.data.slice(0,3)){var t=JSON.parse(e.data.slice(3));m(+t[1]),E(+t[0]),y(+t[2]),N(!1)}else if("GTG"===e.data.slice(0,3))T(e.data.slice(3));else if("GTE"===e.data.slice(0,3))le();else if("INF"===e.data.slice(0,3)){var a=JSON.parse(e.data.slice(3));Y(a.games),te(a.points),re(a.wins),D(!1),P(d),B(g),q(X)}}})),A?c.a.createElement(u.h,{activePanel:G},c.a.createElement(u.d,{id:"loading",style:{textAlign:"center",marginTop:"100px"}},c.a.createElement("h1",null,"Loading..."))):c.a.createElement(u.h,{activePanel:a.current},c.a.createElement(u.d,{id:"main"},c.a.createElement(u.e,null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0433\u0440\u0443, ",V),c.a.createElement(u.c,{style:{textAlign:"center"}},c.a.createElement(u.a,{src:X,size:80,getRootRef:function(e){return e.style="display: inline-block "}}),c.a.createElement("h1",null,"\u0418\u0433\u0440: ",Q," \u041f\u043e\u0431\u0435\u0434: ",ce," \u041e\u0447\u043a\u043e\u0432: ",ee)),c.a.createElement(u.c,null,c.a.createElement(u.b,{size:"xl",stretched:!0,style:{marginTop:25,height:60},onClick:function(){return r({current:"tic-tac-toe-hub",previous:a.current})}},"\u041a\u0440\u0435\u0441\u0442\u0438\u043a\u0438-\u043d\u043e\u043b\u0438\u043a\u0438"),c.a.createElement(u.b,{size:"xl",stretched:!0,style:{marginTop:25,height:60},mode:"secondary",onClick:function(){return r({current:"sea-battle-hub",previous:a.current})}},"\u041c\u043e\u0440\u0441\u043a\u043e\u0439 \u0431\u043e\u0439"))),c.a.createElement(u.d,{id:"tic-tac-toe-hub"},c.a.createElement(u.e,{left:c.a.createElement(u.f,{onClick:function(){return r({current:a.previous,previous:a.current})}})},"\u041a\u0440\u0435\u0441\u0442\u0438\u043a\u0438-\u043d\u043e\u043b\u0438\u043a\u0438"),c.a.createElement(u.c,null,c.a.createElement(u.b,{size:"xl",stretched:!0,style:{marginTop:25},onClick:function(){r({current:"tic-tac-toe",previous:a.current}),j.send("GTF".concat(J,"&"))}},"\u041f\u043e\u0438\u0441\u043a \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u0438\u043a\u0430"),c.a.createElement(u.b,{size:"xl",stretched:!0,style:{marginTop:25},onClick:function(){return console.log("Development")}},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"))),c.a.createElement(u.d,{id:"sea-battle-hub"},c.a.createElement(u.e,{left:c.a.createElement(u.f,{onClick:function(){return r({current:a.previous,previous:a.current})}})},"\u041c\u043e\u0440\u0441\u043a\u043e\u0439 \u0431\u043e\u0439"),c.a.createElement(u.c,null,c.a.createElement(u.b,{size:"xl",stretched:!0,style:{marginTop:25},onClick:function(){return console.log("Development")}},"\u041f\u043e\u0438\u0441\u043a \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u0438\u043a\u0430"),c.a.createElement(u.b,{size:"xl",stretched:!0,style:{marginTop:25},onClick:function(){return console.log("Development")}},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"))),c.a.createElement(u.d,{id:"tic-tac-toe",style:{textAlign:"center"}},c.a.createElement(u.e,null,"\u0411\u0438\u0442\u0432\u0430 ID \u0438\u0433\u0440\u044b: ",b),c.a.createElement("h1",null,"string"!==typeof o&&"ID \u0432\u0430\u0448\u0435\u0433\u043e \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u0438\u043a\u0430:"," ",o),G?c.a.createElement(u.g,{size:"large",style:{marginTop:50}}):c.a.createElement(f,{enemy_id:o,game_id:b,turn:x,end:le,chip:x?"O":"X",setPanel:r,ws:j,change:S})))};o.a.send("VKWebAppInit"),l.a.render(c.a.createElement(v,null),document.getElementById("root"))},57:function(e,t,a){}},[[152,1,2]]]);
//# sourceMappingURL=main.faa29822.chunk.js.map