(this["webpackJsonpvk-app"]=this["webpackJsonpvk-app"]||[]).push([[0],{152:function(e,t,c){e.exports=c(240)},240:function(e,t,c){"use strict";c.r(t);c(153),c(179),c(181),c(182),c(184),c(185),c(186),c(187),c(188),c(189),c(190),c(191),c(193),c(194),c(195),c(196),c(197),c(198),c(199),c(200),c(201),c(202),c(204),c(205),c(206),c(207),c(208),c(209),c(210),c(211),c(212),c(213),c(214),c(215),c(216),c(217),c(218),c(219),c(220),c(221);var a=c(0),n=c.n(a),r=c(32),l=c.n(r),i=c(28),s=c.n(i),o=c(11),u=c(8),m=(c(239),c(57),c(38)),h=c(33);var p=function(e){return n.a.createElement("button",{className:"cell",onClick:function(){return e.onChange(e.cell,e.chip,!1)}},e.text)};var b=function(e){var t=Object(a.useState)(e.field),c=Object(o.a)(t,2),r=c[0],l=c[1],i=Object(a.useState)(e.change),s=Object(o.a)(i,2),u=s[0],b=s[1],d=Object(a.useState)(e.turn),g=Object(o.a)(d,2),E=g[0],O=g[1];function f(t,c,a){if(a)l((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(m.a)({},t,c))})),O(!0);else if(E){e.ws.send("GTG".concat(e.enemy_id,"&").concat(e.game_id,"&").concat(t+c));var n=Object(h.a)(Object(h.a)({},r),{},Object(m.a)({},t,c));l((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(m.a)({},t,c))})),O(!1),e.checkWin(n)}}return e.change!==u&&e.change&&(b(e.change),f(e.change[0],e.change[1],!0)),n.a.createElement("div",{className:"field"},n.a.createElement("div",{className:"board-row"},n.a.createElement(p,{text:r[1],cell:1,chip:e.chip,onChange:f}),n.a.createElement(p,{text:r[2],cell:2,chip:e.chip,onChange:f}),n.a.createElement(p,{text:r[3],cell:3,chip:e.chip,onChange:f})),n.a.createElement("div",{className:"board-row"},n.a.createElement(p,{text:r[4],cell:4,chip:e.chip,onChange:f}),n.a.createElement(p,{text:r[5],cell:5,chip:e.chip,onChange:f}),n.a.createElement(p,{text:r[6],cell:6,chip:e.chip,onChange:f})),n.a.createElement("div",{className:"board-row"},n.a.createElement(p,{text:r[7],cell:7,chip:e.chip,onChange:f}),n.a.createElement(p,{text:r[8],cell:8,chip:e.chip,onChange:f}),n.a.createElement(p,{text:r[9],cell:9,chip:e.chip,onChange:f})))};var d=function(e){return n.a.createElement(b,{field:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:""},game_id:e.game_id,enemy_id:e.enemy_id,turn:e.turn,ws:e.ws,chip:e.chip,change:e.change,checkWin:function(t){for(var c=[[1,2,3],[4,5,6],[7,8,9],[1,4,7],[2,5,8],[3,6,9],[1,5,9],[3,5,7]],a=0;a<c.length;a++){var n=Object(o.a)(c[a],3),r=n[0],l=n[1],i=n[2];t[r]&&t[r]===t[l]&&t[r]===t[i]&&(e.ws.send("GTE".concat(e.enemy_id,"&").concat(e.game_id)),e.setPanel({current:"main",previous:""}),e.end())}}})},g=new WebSocket("wss://vk-app-server.herokuapp.com/");var E=function(){var e=Object(a.useState)({current:"main",previous:""}),t=Object(o.a)(e,2),c=t[0],r=t[1],l=Object(a.useState)("\u041f\u043e\u0438\u0441\u043a \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u0438\u043a\u0430..."),i=Object(o.a)(l,2),m=i[0],h=i[1],p=Object(a.useState)(),b=Object(o.a)(p,2),E=b[0],O=b[1],f=Object(a.useState)(),j=Object(o.a)(f,2),v=j[0],x=j[1],C=Object(a.useState)(0),S=Object(o.a)(C,2),k=S[0],y=S[1],w=Object(a.useState)(!0),T=Object(o.a)(w,2),_=T[0],G=T[1],N=Object(a.useState)(!0),z=Object(o.a)(N,2),I=(z[0],z[1]),A=Object(a.useState)(),D=Object(o.a)(A,2),W=D[0],F=D[1],J=Object(a.useState)(),P=Object(o.a)(J,2),K=P[0],V=P[1],B=Object(a.useState)(),U=Object(o.a)(B,2),X=U[0],q=U[1],H=Object(a.useState)(),L=Object(o.a)(H,2),M=L[0],Q=L[1],R=Object(a.useState)(),Y=Object(o.a)(R,2),Z=Y[0],$=Y[1],ee=Object(a.useState)(),te=Object(o.a)(ee,2),ce=te[0],ae=te[1];function ne(){r({current:"main",previous:""}),h("\u041f\u043e\u0438\u0441\u043a \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u0438\u043a\u0430..."),O(),x(),G(!0)}return s.a.send("VKWebAppGetUserInfo").then((function(e){var t=e.id,c=e.first_name,a=e.last_name;F(t),V(c),q(e.photo_200),g.send("INF".concat(t,"&").concat(c,"&").concat(a))})),Object(a.useEffect)((function(){g.onmessage=function(e){if("GTF"===e.data.slice(0,3)){var t=JSON.parse(e.data.slice(3));h(+t[1]),O(+t[0]),x(+t[2]),G(!1)}else if("GTG"===e.data.slice(0,3))y(e.data.slice(3));else if("GTE"===e.data.slice(0,3))ne();else if("INF"===e.data.slice(0,3)){var c=JSON.parse(e.data.slice(3));Q(c.games),$(c.points),ae(c.wins),I(!1)}}})),n.a.createElement(u.h,{activePanel:c.current},n.a.createElement(u.d,{id:"main"},n.a.createElement(u.e,null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0433\u0440\u0443, ",K),n.a.createElement(u.c,{style:{textAlign:"center"}},n.a.createElement(u.a,{src:X,size:80,style:{textAlign:"center"}}),n.a.createElement("h1",null,"\u0418\u0433\u0440: ",M," \u041f\u043e\u0431\u0435\u0434: ",ce," \u041e\u0447\u043a\u043e\u0432: ",Z)),n.a.createElement(u.c,null,n.a.createElement(u.b,{size:"xl",stretched:!0,style:{marginTop:25,height:60},onClick:function(){return r({current:"tic-tac-toe-hub",previous:c.current})}},"\u041a\u0440\u0435\u0441\u0442\u0438\u043a\u0438-\u043d\u043e\u043b\u0438\u043a\u0438"),n.a.createElement(u.b,{size:"xl",stretched:!0,style:{marginTop:25,height:60},mode:"secondary",onClick:function(){return r({current:"sea-battle-hub",previous:c.current})}},"\u041c\u043e\u0440\u0441\u043a\u043e\u0439 \u0431\u043e\u0439"))),n.a.createElement(u.d,{id:"tic-tac-toe-hub"},n.a.createElement(u.e,{left:n.a.createElement(u.f,{onClick:function(){return r({current:c.previous,previous:c.current})}})},"\u041a\u0440\u0435\u0441\u0442\u0438\u043a\u0438-\u043d\u043e\u043b\u0438\u043a\u0438"),n.a.createElement(u.c,null,n.a.createElement(u.b,{size:"xl",stretched:!0,style:{marginTop:25},onClick:function(){r({current:"tic-tac-toe",previous:c.current}),g.send("GTF".concat(W,"&"))}},"\u041f\u043e\u0438\u0441\u043a \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u0438\u043a\u0430"),n.a.createElement(u.b,{size:"xl",stretched:!0,style:{marginTop:25},onClick:function(){return console.log("Development")}},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"))),n.a.createElement(u.d,{id:"sea-battle-hub"},n.a.createElement(u.e,{left:n.a.createElement(u.f,{onClick:function(){return r({current:c.previous,previous:c.current})}})},"\u041c\u043e\u0440\u0441\u043a\u043e\u0439 \u0431\u043e\u0439"),n.a.createElement(u.c,null,n.a.createElement(u.b,{size:"xl",stretched:!0,style:{marginTop:25},onClick:function(){return console.log("Development")}},"\u041f\u043e\u0438\u0441\u043a \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u0438\u043a\u0430"),n.a.createElement(u.b,{size:"xl",stretched:!0,style:{marginTop:25},onClick:function(){return console.log("Development")}},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"))),n.a.createElement(u.d,{id:"tic-tac-toe",style:{textAlign:"center"}},n.a.createElement(u.e,null,"\u0411\u0438\u0442\u0432\u0430 ID \u0438\u0433\u0440\u044b: ",E),n.a.createElement("h1",null,"string"!==typeof m&&"ID \u0432\u0430\u0448\u0435\u0433\u043e \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u0438\u043a\u0430:"," ",m),_?n.a.createElement(u.g,{size:"large",style:{marginTop:50}}):n.a.createElement(d,{enemy_id:m,game_id:E,turn:v,end:ne,chip:v?"O":"X",setPanel:r,ws:g,change:k})))};s.a.send("VKWebAppInit"),l.a.render(n.a.createElement(E,null),document.getElementById("root"))},57:function(e,t,c){}},[[152,1,2]]]);
//# sourceMappingURL=main.8fdfb5e4.chunk.js.map